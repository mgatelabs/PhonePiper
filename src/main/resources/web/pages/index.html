<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">

    <!-- Apple Support -->
    <meta name="apple-mobile-web-app-title" content="FFBExecute">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="viewport" content="width=device-width">

    <link rel="apple-touch-icon" sizes="180x180" href="/piper/resource/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/piper/resource/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/piper/resource/favicon-16x16.png">
    <link rel="manifest" href="/piper/resource/site.webmanifest">
    <link rel="mask-icon" href="/piper/resource/safari-pinned-tab.svg" color="#5bbad5">
    <link rel="shortcut icon" href="/piper/resource/favicon.ico">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="msapplication-config" content="/piper/resource/browserconfig.xml">
    <meta name="theme-color" content="#ffffff">

    <title>Phone Piper - Web Interface</title>

    <link href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">

    <script type="text/javascript" src="http://code.jquery.com/jquery-3.3.1.min.js"></script>

    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"
            integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl"
            crossorigin="anonymous"></script>

    <link href="/piper/resource/index.css" rel="stylesheet">

    <script type="text/javascript" src="/piper/resource/index.js"></script>

</head>
<body>

<div class="container-fluid">

    <!-- !!!!!!!! -->

    <nav class="navbar navbar-expand-md navbar-dark bg-dark" style="margin-bottom: 1em;">
        <a class="navbar-brand" href="#">Phone Piper</a>
        <span class="navbar-brand" id="statusName">Phone Piper</span>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarsExample01" aria-controls="navbarsExample01" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>

        <div class="collapse navbar-collapse" id="navbarsExample01">
            <ul class="nav navbar-nav mr-auto" id="myTab" role="tablist">
                <li class="nav-item">
                    <a class="nav-link notLoaded active" id="home-tab" data-toggle="tab" href="#home" role="tab" aria-controls="home" aria-selected="true">Home</a>
                </li>
                <li class="nav-item notLoaded">
                    <a class="nav-link" id="config-tab" data-toggle="tab" href="#config" role="tab" aria-controls="config" aria-selected="true">Config</a>
                </li>
                <!--
                <li class="nav-item notLoaded">
                    <a class="nav-link" id="files-tab" data-toggle="tab" href="#files" role="tab" aria-controls="files" aria-selected="true">Files</a>
                </li>
                -->
                <li class="nav-item whenRun">
                    <a class="nav-link" id="run-tab" data-toggle="tab" href="#run" role="tab" aria-controls="run" aria-selected="false">Run</a>
                </li>
                <li class="nav-item whenRun dropdown">
                    <a class="nav-link dropdown-toggle" id="dropdownVars" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Variables</a>
                    <div class="dropdown-menu" id="dropdownVarLinks" aria-labelledby="dropdownVars">
                        <a class="nav-link" id="vars-tab" data-toggle="tab" href="#vars" role="tab" aria-controls="vars" aria-selected="false">Variables</a>
                    </div>
                </li>
                <li class="nav-item whenEdit">
                    <a class="nav-link" id="edit-tab" data-toggle="tab" href="#edit" role="tab" aria-controls="edit" aria-selected="false">Edit</a>
                </li>
                <li class="nav-item whenLoaded">
                    <a class="nav-link" id="device-tab" data-toggle="tab" href="#device" role="tab" aria-controls="device" aria-selected="false">Settings</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" id="console-tab" data-toggle="tab" href="#console" role="tab" aria-controls="console" aria-selected="false">Logging</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" id="about-tab" data-toggle="tab" href="#about" role="tab" aria-controls="console" aria-selected="false">About</a>
                </li>
            </ul>

        </div>
    </nav>

    <!-- !!!!!!!! -->

    <div class="tab-content" id="myTabContent">

        <div class="tab-pane fade show active text-center" id="home" role="tabpanel" aria-labelledby="home-tab">

            <div class="col-sm-12">
                <img src="/piper/resource/PhonePiper-Large.png" class="img-fluid" alt="Responsive image"/>
            </div>

            <div class="col-sm-12">
                <h3>Available Configs</h3>
            </div>

            <div class="row text-center" id="config-list">

                <div class="col-sm-12 col-md-6 col-lg-4 col-xl-3">
                    <div class="card shadow-sm">
                        <div class="card-header">
                            <h4 class="my-0 font-weight-normal">New Configuration</h4>
                        </div>
                        <div class="card-body">
                            <button type="button" id="new-config" class="btn btn-lg btn-block btn-outline-primary">Create</button>
                        </div>
                    </div>
                </div>
            </div>

        </div>

        <div class="tab-pane fade show" id="config" role="tabpanel" aria-labelledby="config-tab">

            <form id="setting-form" class="col-sm-12" style="display:none;">

                <h3>Engine Configuration</h3>

                <div class="input-group">
                    <div class="input-group-prepend">
                        <span class="input-group-text">Name</span>
                    </div>
                    <input type="text" class="form-control" id="configName" placeholder="Short Description">
                </div>

                <br/>

                <div class="input-group">
                    <div class="input-group-prepend">
                        <span class="input-group-text">State Name</span>
                    </div>
                    <input type="text" class="form-control" id="configStateName" placeholder="State name">
                </div>

                <br/>
                <div class="alert alert-dark" role="alert">
                    This is used to store the values on the server with a specific name.  A-Z, a-z, _, - and 0-9 only.
                </div>

                <br/>

                <div class="input-group">
                    <div class="input-group-prepend">
                        <span class="input-group-text">Device</span>
                    </div>
                    <select class="form-control" id="device1"></select>
                </div>

                <br/>
                <div class="input-group">
                    <div class="input-group-prepend">
                        <span class="input-group-text">View</span>
                    </div>
                    <select class="form-control view-item default"></select>
                    <div class="input-group-append">
                        <button type="button" id="addViewButton" class="btn btn-success">+</button>
                    </div>
                </div>
                <div id="addViewHolder">

                </div>

                <br/>
                <div class="input-group">
                    <div class="input-group-prepend">
                        <span class="input-group-text">Script</span>
                    </div>
                    <select class="form-control script-item default"></select>
                    <div class="input-group-append">
                        <button type="button" id="addScriptButton" class="btn btn-success">+</button>
                    </div>
                </div>
                <div id="addScriptHolder">

                </div>
                <br/>

                <h3>Device</h3>

                <div class="input-group">
                    <div class="input-group-prepend">
                        <span class="input-group-text">I.P</span>
                    </div>
                    <input type="text" class="form-control config-attribute" attrname="device-ip" placeholder="IP address of device">
                </div>

                <br/>
                <div class="input-group">
                    <div class="input-group-prepend">
                        <span class="input-group-text">ADB Port</span>
                    </div>
                    <input type="text" class="form-control config-attribute" attrname="device-adbPort" placeholder="5555">
                </div>

                <br/>
                <div class="alert alert-dark" role="alert">
                    The ADB port number for your device.  For real devices 5555 is the default.  For MEmu the value can be somewhere near 21503 if your running through NAT mode.
                </div>

                <br/>
                <div class="input-group">
                    <div class="input-group-prepend">
                        <span class="input-group-text">Helper Port</span>
                    </div>
                    <input type="text" class="form-control config-attribute" attrname="device-helperPort" placeholder="8080">
                </div>

                <br/>
                <div class="alert alert-dark" role="alert">
                    The port number for Phone Piper Helper app.  This is typically 8080, unless you changed the MEmu forwarding config for PPH.
                </div>

                <br/>
                <div class="input-group">
                    <div class="input-group-prepend">
                        <span class="input-group-text">ADB</span>
                    </div>
                    <input type="text" class="form-control config-attribute" attrname="device-adb" placeholder="Path to ADB execuable">
                </div>

                <br/>
                <div class="alert alert-dark" role="alert">
                    Path to your ADB executable.  The full path please.  If ADB is available on PATH, you can leave this blank.
                </div>

                <br/>
                <div class="input-group">
                    <div class="input-group-prepend">
                        <span class="input-group-text">Direct</span>
                    </div>
                    <input type="text" class="form-control config-attribute" attrname="device-direct" placeholder="ADB direct value">
                </div>

                <br/>
                <div class="alert alert-dark" role="alert">
                    Leave blank in most cases.  Used to identity which device to communicate with, if multiple have been connected.
                </div>

                <br/>
                <div class="input-group">
                    <div class="input-group-prepend">
                        <span class="input-group-text">Connection</span>
                    </div>
                    <select class="form-control config-attribute" attrname="device-wifi">
                        <option value="true" selected>Remote</option>
                        <option value="false">USB-Emulated</option>
                    </select>
                </div>

                <br/>
                <div class="alert alert-dark" role="alert">
                    If you are running a real device, or MEmu bridged, please choose Remote.  Otherwise choose USB-Emulated.
                </div>

                <br/>
                <div class="input-group">
                    <div class="input-group-prepend">
                        <span class="input-group-text">Throttle</span>
                    </div>
                    <input type="text" class="form-control config-attribute" attrname="device-throttle" placeholder="250">
                </div>

                <br/>
                <div class="alert alert-dark" role="alert">
                    This is the time in MS to throttle the main loop.  The default is 250, or 250 miliseconds.  1000 milliseconds is a second.
                </div>

                <br/>
                <div class="form-group">
                    <button type="button" id="controlLoad" class="btn btn-primary">Run Script</button>
                    <button type="button" id="controlEditView" class="btn btn-secondary">Edit View</button>
                    <button type="button" id="controlSave" class="btn btn-dark">Save Config</button>
                </div>
            </form>

        </div>
        <div class="tab-pane fade" id="run" role="tabpanel" aria-labelledby="run-tab">

            <form id="loaded-form" class="col-sm-12" style="display:none;">
                <h3>Run</h3>
                <div class="form-group">
                    <label for="states">State</label>
                    <select id="states" class="form-control"></select>
                </div>
                <div class="form-group">
                    <button type="button" id="controlPlayPause" class="btn btn-primary">Play/Pause</button>
                    <button type="button" id="controlUnload" class="btn btn-danger notWhileRunning">Unload</button>
                    <button type="button" id="controlKill" class="btn btn-danger">Kill</button>
                    <button type="button" id="controlDumpState" class="btn btn-secondary">Dump State</button>
                </div>


                <div class="form-group">
                    <label for="components">Components</label>
                    <select id="components" class="form-control notWhileRunning"></select>
                </div>
                <div class="form-group">
                    <button type="button" id="controlTap" controlButton="TAP"
                            class="btn btn-info notWhileRunning controlButton">Tap
                    </button>
                    <button type="button" id="controlSwipeUp" controlButton="SWIPE_UP"
                            class="btn btn-info notWhileRunning controlButton">Up
                    </button>
                    <button type="button" id="controlSwipeRight" controlButton="SWIPE_RIGHT"
                            class="btn btn-info notWhileRunning controlButton">Right
                    </button>
                    <button type="button" id="controlSwipeDown" controlButton="SWIPE_DOWN"
                            class="btn btn-info notWhileRunning controlButton">Down
                    </button>
                    <button type="button" id="controlSwipeLeft" controlButton="SWIPE_LEFT"
                            class="btn btn-info notWhileRunning controlButton">Left
                    </button>

                    <button type="button" id="controlSlowUp" controlButton="SLOW_UP"
                            class="btn btn-warning notWhileRunning controlButton">Up
                    </button>
                    <button type="button" id="controlSlowRight" controlButton="SLOW_RIGHT"
                            class="btn btn-warning notWhileRunning controlButton">Right
                    </button>
                    <button type="button" id="controlSlowDown" controlButton="SLOW_DOWN"
                            class="btn btn-warning notWhileRunning controlButton">Down
                    </button>
                    <button type="button" id="controlSlowLeft" controlButton="SLOW_LEFT"
                            class="btn btn-warning notWhileRunning controlButton">Left
                    </button>
                </div>
            </form>

        </div>

        <div class="tab-pane fade" id="device" role="tabpanel" aria-labelledby="device-tab">

            <form id="player-form" class="col-sm-12">

                <h3>ADB</h3>

                <div class="input-group">
                    <button type="button" class="btn controlAdb btn-info notWhileRunning whenLoaded" adb="restart">Restart</button>
                    <button type="button" class="btn controlAdb btn-info notWhileRunning whenLoaded" adb="usb">USB</button>
                    <button type="button" class="btn controlAdb btn-info notWhileRunning whenLoaded" adb="remote">Remote</button>
                    <button type="button" class="btn controlAdb btn-info notWhileRunning whenLoaded" adb="kill">Kill</button>
                    <button type="button" class="btn controlAdb btn-info notWhileRunning whenLoaded" adb="connect">Connect</button>
                    <button type="button" class="btn controlAdb btn-info notWhileRunning whenLoaded" adb="devices">Devices</button>
                </div>
                <br/>
                <div class="form-group">
                    <textarea class="form-control" id="adb-info" rows="3"></textarea>
                </div>

                <br/>

                <h3>Test Connection</h3>

                <div class="input-group">
                    <button type="button" id="controlUpdatePreview" class="btn btn-info whenLoaded notWhileRunning">Get Screen Preview</button>
                </div>

                <br/>
                <div class="alert alert-dark" role="alert">
                    Use this button to test if this App can communicate with ADB & the Phone Helper App.  If everything works, you should see a image appear below.
                </div>

                <div class="form-group">
                    <img id="previewImage" src="" class="img-fluid" alt="Responsive image">
                </div>


            </form>


        </div>
        <div class="tab-pane fade" id="edit" role="tabpanel" aria-labelledby="edit-tab">

            <form id="edit-form" class="col-sm-12" style="display:none;">
                <div class="form-group">
                    <button type="button" id="unloadEdit" class="btn  btn-danger notWhileRunning">Unload</button>
                </div>

                <div class="form-group">
                    <label for="edit-screens">Screens</label>
                    <select id="edit-screens" class="form-control notWhileRunning"></select>
                </div>

                <div class="form-group">
                    <button type="button" class="btn btn-info edit-action notWhileRunning whenLoaded prompt-name" editvalue="stubScreen">Stub</button>
                    <button type="button" class="btn btn-info edit-action notWhileRunning whenLoaded" editvalue="editScreen"       lst="edit-screens">Edit Pixels</button>
                    <button type="button" class="btn btn-info edit-action notWhileRunning whenLoaded" editvalue="fixScreen"        lst="edit-screens">Fix Pixels</button>
                    <button type="button" class="btn btn-info edit-action notWhileRunning whenLoaded" editvalue="verifyScreen"     lst="edit-screens">Verify (Disk)</button>
                    <button type="button" class="btn btn-info edit-action notWhileRunning whenLoaded" editvalue="liveVerifyScreen" lst="edit-screens">Verify (Live)</button>
                    <button type="button" class="btn btn-info edit-action notWhileRunning whenLoaded" editvalue="updateScreen"     lst="edit-screens">Update Image</button>
                    <span class="FileName" id="ScreenName"></span>
                </div>

                <div class="form-group">
                    <label for="edit-components">Components</label>
                    <select id="edit-components" class="form-control notWhileRunning"></select>
                </div>

                <div class="form-group">
                    <div class="form-group">
                        <button type="button" class="edit-action notWhileRunning btn btn-info notWhileRunning whenLoaded prompt-name" editvalue="stubComponent">Stub</button>
                        <button type="button" class="edit-action notWhileRunning btn btn-info notWhileRunning whenLoaded" lst="edit-components" editvalue="editComponent">Edit</button>
                        <button type="button" class="edit-action notWhileRunning btn btn-info notWhileRunning whenLoaded" lst="edit-components" editvalue="updateComponent">Update</button>
                        <span class="FileName" id="ComponentName"></span>
                    </div>
                </div>


            </form>

        </div>
        <div class="tab-pane fade" id="vars" role="tabpanel" aria-labelledby="vars-tab">
            <div class="row">
                <form id="variable-form" class="col-sm-12" style="display:none;">
                    <div id="variable-container" class="container-fluid">

                    </div>
                </form>
            </div>
        </div>
        <div class="tab-pane fade" id="console" role="tabpanel" aria-labelledby="console-tab">

            <div class="container-fluid">

                <div class="row">
                    <div class="col-md-4">
                        <div class="input-group">
                            <div class="input-group-prepend">
                                <span class="input-group-text">Console</span>
                            </div>
                            <select id="consoleLogging" class="form-control logging" mode="console">
                                <option value="ERROR">Error</option>
                                <option value="INFO" selected>Info</option>
                                <option value="DEBUG">Debug</option>
                                <option value="TRACE">Trace</option>
                                <option value="OFF">Off</option>
                            </select>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="input-group">
                            <div class="input-group-prepend">
                                <span class="input-group-text">Web</span>
                            </div>
                            <select id="webLogging" class="form-control logging" mode="web">
                                <option value="ERROR">Error</option>
                                <option value="INFO" selected>Info</option>
                                <option value="DEBUG">Debug</option>
                                <option value="TRACE">Trace</option>
                                <option value="OFF">Off</option>
                            </select>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="input-group">
                            <div class="input-group-prepend">
                                <span class="input-group-text">File</span>
                            </div>
                            <select id="fileLogging" class="form-control logging" mode="file">
                                <option value="ERROR">Error</option>
                                <option value="INFO" selected>Info</option>
                                <option value="DEBUG">Debug</option>
                                <option value="TRACE">Trace</option>
                                <option value="OFF">Off</option>
                            </select>
                        </div>
                    </div>
                </div>
            </div>

            <div id="logs" class="container-fluid"></div>
        </div>
        <div class="tab-pane fade" id="about" role="tabpanel" aria-labelledby="about-tab">

            <div class="jumbotron">
                <div class="container">
                    <h1 class="display-3">People</h1>
                </div>
            </div>

            <div class="container">
                <!-- Example row of columns -->
                <div class="row">
                    <div class="col-md-4">
                        <h2>Michael Fuller</h2>
                        <p>Creator</p>
                        <p><a href="https://twitter.com/mgatelabs">Twitter</a>, <a href="https://www.reddit.com/user/MGateLabs">Reddit</a></p>
                        <h5>Other Projects</h5>
                        <p>Mobile VR Station, <a href="https://itunes.apple.com/us/app/mobile-vr-station/id959820493?mt=8" target="_blank">iOS</a> &amp; <a href="https://play.google.com/store/apps/details?id=com.mgatelabs.mobilevrstation&hl=en_US" target="_blank">Android</a>.</p>
                        <!--
                        <p><a class="btn btn-secondary" href="#" role="button">View details »</a></p>
                        -->
                    </div>
                    <!--
                    <div class="col-md-4">
                        <h2>Heading</h2>
                        <p>Donec id elit non mi porta gravida at eget metus. Fusce dapibus, tellus ac cursus commodo, tortor mauris condimentum nibh, ut fermentum massa justo sit amet risus. Etiam porta sem malesuada magna mollis euismod. Donec sed odio dui. </p>
                        <p><a class="btn btn-secondary" href="#" role="button">View details »</a></p>
                    </div>
                    <div class="col-md-4">
                        <h2>Heading</h2>
                        <p>Donec sed odio dui. Cras justo odio, dapibus ac facilisis in, egestas eget quam. Vestibulum id ligula porta felis euismod semper. Fusce dapibus, tellus ac cursus commodo, tortor mauris condimentum nibh, ut fermentum massa justo sit amet risus.</p>
                        <p><a class="btn btn-secondary" href="#" role="button">View details »</a></p>
                    </div>
                    -->
                </div>

                <hr>

            </div>

        </div>
    </div>


</div>


</body>
</html>